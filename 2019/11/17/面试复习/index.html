<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">

<style>
    .pace .pace-progress {
        background: #1E92FB; /*进度条颜色*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*上边框颜色*/
        border-left-color: #1E92FB;    /*左边框颜色*/
    }
</style>









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="基础知识,">










<meta name="description" content="写在前面：JAVA神书： 《java编程思想》（Thinking in Java） 《java核心技术》 Spring是业务层框架 WEB层                业务层        持久层 SpringMvc        Spring        SpringJDBC 这些都是Spring的一部分，Spring一站式开发，他在所有层面都给你提供了解决方案。 IOC  Di    为">
<meta name="keywords" content="基础知识">
<meta property="og:type" content="article">
<meta property="og:title" content="11月面试复习">
<meta property="og:url" content="http://hanhanhanxu.github.io/2019/11/17/面试复习/index.html">
<meta property="og:site_name" content="旭">
<meta property="og:description" content="写在前面：JAVA神书： 《java编程思想》（Thinking in Java） 《java核心技术》 Spring是业务层框架 WEB层                业务层        持久层 SpringMvc        Spring        SpringJDBC 这些都是Spring的一部分，Spring一站式开发，他在所有层面都给你提供了解决方案。 IOC  Di    为">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://s2.ax1x.com/2019/11/13/MGqXyn.md.jpg">
<meta property="og:image" content="https://s2.ax1x.com/2019/11/15/MdTT7n.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/11/16/M0Q461.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/11/11/MQP7LR.md.png">
<meta property="og:updated_time" content="2019-11-17T15:03:39.946Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="11月面试复习">
<meta name="twitter:description" content="写在前面：JAVA神书： 《java编程思想》（Thinking in Java） 《java核心技术》 Spring是业务层框架 WEB层                业务层        持久层 SpringMvc        Spring        SpringJDBC 这些都是Spring的一部分，Spring一站式开发，他在所有层面都给你提供了解决方案。 IOC  Di    为">
<meta name="twitter:image" content="https://s2.ax1x.com/2019/11/13/MGqXyn.md.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'HanXu'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://hanhanhanxu.github.io/2019/11/17/面试复习/">







  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "201adca1"
    });
  daovoice('update');
  </script>



<script>
    (function(){
        if(''){
            if (prompt('请输入文章密码') !== ''){
                alert('密码错误！');
                history.back();
            }
        }
    })();
</script>

  <title>11月面试复习 | 旭</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">


<!--next动态背景-->
<div class="bg_content">
  <canvas id="canvas"></canvas>
</div>

<!--音乐播放器-->
<!--<link rel="stylesheet" href="/dist/APlayer.min.css">
<div id="aplayer"></div>
<script type="text/javascript" src="/dist/APlayer.min.js"></script>
<script type="text/javascript" src="/dist/music.js"></script>-->
<script>
    var xlm_wid='15361';
    var xlm_url='https://www.xianliao.me/';
</script>
<script type="text/javascript" charset="UTF-8" src="https://www.xianliao.me/embed.js"></script>
                                                

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner">

<div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">旭</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">高山仰止，景行行止，虽不能至，然心向往之。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-top">
          <a href="/top/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-signal"></i> <br>
            
            阅读排行
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://hanhanhanxu.github.io/2019/11/17/面试复习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Han Xu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="旭">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">11月面试复习</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-17T22:51:43+08:00">
                2019-11-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/面试/" itemprop="url" rel="index">
                    <span itemprop="name">面试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/11/17/面试复习/" class="leancloud_visitors" data-flag-title="11月面试复习">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  12.7k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  55
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>写在前面：JAVA神书：</p>
<p>《java编程思想》（Thinking in Java）</p>
<p>《java核心技术》</p>
<p>Spring是业务层框架</p>
<p>WEB层                业务层        持久层</p>
<p>SpringMvc        Spring        SpringJDBC</p>
<p>这些都是Spring的一部分，Spring一站式开发，他在所有层面都给你提供了解决方案。</p>
<p>IOC  Di    为了解耦</p>
<p>实现过程：</p>
<p>使用者        （工厂    XML配置文件）    资源</p>
<p>AOP</p>
<p>jar.exe 打jar包：day11  07</p>
<ul>
<li>maven clean </li>
<li>maven compile </li>
<li>maven test </li>
<li>maven package </li>
<li>maven install </li>
<li>maven deploy</li>
</ul>
<h3 id="Java语言基础"><a href="#Java语言基础" class="headerlink" title="Java语言基础"></a>Java语言基础</h3><h4 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h4><p><strong>JAVA中8中基本数据类型</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span> <span class="keyword">short</span> <span class="keyword">int</span> <span class="keyword">long</span>    <span class="keyword">float</span> <span class="keyword">double</span>    <span class="keyword">char</span>    <span class="keyword">boolean</span></span><br><span class="line"><span class="number">1</span>字节	 <span class="number">2</span>	   <span class="number">4</span>	<span class="number">8</span>		<span class="number">4</span>	  <span class="number">8</span>			<span class="number">2</span>		<span class="number">1</span></span><br><span class="line"><span class="number">8</span>位 = <span class="number">1</span>字节</span><br><span class="line"><span class="number">8</span>bit(b) = <span class="number">1</span>Byte(B)</span><br></pre></td></tr></table></figure>
<p><strong>默认类型和转换问题</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">         * java中的数字，没有小数点，默认为int，比如 1,2,3,999这些</span></span><br><span class="line"><span class="comment">         * 有小数点，默认为double，比如3.4，5.666666，7.0这些</span></span><br><span class="line"><span class="comment">         * long l = 9999999 错误：9999999是int，但是</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="comment">//报错</span></span><br><span class="line"><span class="keyword">float</span> f =  <span class="number">5.0</span>;<span class="comment">//有小数点的都默认是double，高精度位double不能向低精度位float转换</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//正确</span></span><br><span class="line"><span class="keyword">float</span> f2 = (<span class="keyword">float</span>) <span class="number">3.4</span>;</span><br><span class="line"><span class="keyword">float</span> f3 = <span class="number">3.4f</span>;</span><br><span class="line"><span class="keyword">float</span> f4 = <span class="number">3.4F</span>;</span><br><span class="line"><span class="keyword">double</span> b = <span class="number">3.4</span>;</span><br><span class="line"><span class="keyword">double</span> b2 = <span class="number">3.4F</span>;<span class="comment">//正确，因为低精度位可以默认向高精度位强转换。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> l2 = <span class="number">9999999999</span>;	<span class="comment">//报错，99亿超过了int的最大值（21亿多）</span></span><br><span class="line"><span class="keyword">long</span> l = <span class="number">4</span>;				<span class="comment">//正确，因为低精度位int可以默认向高精度位long强转换。</span></span><br><span class="line"><span class="keyword">long</span> l3 = <span class="number">9999999999L</span>;	<span class="comment">//正确，转为了long类型</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> i += <span class="number">1</span>;	<span class="comment">//错误 i = i + 1;  赋值符号先从右边计算，i + 1，此时i还没有初值，所以错误。</span></span><br><span class="line"><span class="keyword">short</span> s = <span class="number">1</span>;</span><br><span class="line">s += <span class="number">1</span>;		<span class="comment">//正确，相当于 s = (short) (s+1); +=符号 会自动帮你强转为左边的类型</span></span><br><span class="line">s = s + <span class="number">1</span>;	<span class="comment">//错误，s是short类型，1是int类型，低精度与高精度做运算时，会转换为高精度，这里转换为int，然后将int类型赋值给short类型，无法将低精度直接赋值给高精度，错误，需要手动强转。</span></span><br></pre></td></tr></table></figure>
<h4 id="位逻辑运算符"><a href="#位逻辑运算符" class="headerlink" title="位逻辑运算符"></a>位逻辑运算符</h4><blockquote>
<p>计算时，先把十进制数字转换为二进制数字</p>
</blockquote>
<p>与（&amp;  and）、或（|  or）、非（~）、 异或（^）</p>
<p><em>详情：<a href="https://www.cnblogs.com/lichengze/p/5713409.html" target="_blank" rel="noopener">https://www.cnblogs.com/lichengze/p/5713409.html</a></em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//与 &amp; ：均为1时为1，有一个为0就为0</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        int a=129;//00000000 00000000 00000000 10000001</span></span><br><span class="line"><span class="comment">        int b=128;//00000000 00000000 00000000 10000000</span></span><br><span class="line"><span class="comment">                  //00000000 00000000 00000000 10000000</span></span><br><span class="line"><span class="comment">        System.out.println("a&amp;b 的结果是："+(a&amp;b));//128</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//或 | ：有一个为1即为1，均为0时为0</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        int a=129;//00000000 00000000 00000000 10000001</span></span><br><span class="line"><span class="comment">        int b=128;//00000000 00000000 00000000 10000000</span></span><br><span class="line"><span class="comment">                  //00000000 00000000 00000000 10000001</span></span><br><span class="line"><span class="comment">        System.out.println("a|b 的结果是："+(a|b));//129</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//非~ ： 0变为1，1变为0</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        int a=2;//00000000 00000000 00000000 00000010</span></span><br><span class="line"><span class="comment">                //11111111 11111111 11111111 11111101</span></span><br><span class="line"><span class="comment">        System.out.println("~a 的结果是："+(~a));</span></span><br><span class="line"><span class="comment">        System.out.println(Integer.toBinaryString(-3));</span></span><br><span class="line"><span class="comment">        		//11111111 11111111 11111111 11111101</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//异或^ ： 相同则为0，不同则为1</span></span><br><span class="line">        <span class="keyword">int</span> a=<span class="number">8</span>;<span class="comment">//00000000 00000000 00000000 00001000</span></span><br><span class="line">        <span class="keyword">int</span> b=<span class="number">2</span>;<span class="comment">//00000000 00000000 00000000 00000010</span></span><br><span class="line">                <span class="comment">//00000000 00000000 00000000 00001010</span></span><br><span class="line">        System.out.println(<span class="string">"a^b 的结果是："</span>+(a^b));<span class="comment">//10</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h4><p>&amp;&amp; || （短路与、短路或）</p>
<h4 id="位移运算符"><a href="#位移运算符" class="headerlink" title="位移运算符"></a>位移运算符</h4><blockquote>
<p>计算2*8最快的方式：8&lt;&lt;1</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">8</span>;</span><br><span class="line">System.out.println(i&lt;&lt;<span class="number">1</span>);<span class="comment">//8*2=16 左移 *2 右移 /2</span></span><br><span class="line">System.out.println(i&gt;&gt;<span class="number">2</span>);<span class="comment">//8/4=2  右移 /2的2次方</span></span><br><span class="line">System.out.println(i&lt;&lt;<span class="number">3</span>);<span class="comment">//8*8=64 左移 *2的3次方</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//左移一位</span></span><br><span class="line"><span class="comment">//00000000 00000000 00000000 00001000</span></span><br><span class="line"><span class="comment">//00000000 00000000 00000000 00010000</span></span><br></pre></td></tr></table></figure>
<h4 id="无符号位移"><a href="#无符号位移" class="headerlink" title="无符号位移"></a>无符号位移</h4><p>无符号右移：<code>&gt;&gt;&gt;</code>   无符号左移： <code>&lt;&lt;&lt;</code></p>
<p><strong>即无论正负数，右移之后符号位均补 0 </strong></p>
<p><strong>计算-2 &gt;&gt;&gt; 1结果是多少</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-<span class="number">2</span> 的二进制求法是正数取反加<span class="number">1</span>。</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> 的二进制表示为		 <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000010</span></span><br><span class="line">因此-<span class="number">2</span>的二进制表示为		<span class="number">11111111</span> <span class="number">11111111</span> <span class="number">11111111</span> <span class="number">11111110</span></span><br><span class="line"></span><br><span class="line">右移<span class="number">1</span>位，其余补<span class="number">0</span>		 <span class="number">011111111</span> <span class="number">11111111</span> <span class="number">11111111</span> <span class="number">1111111</span></span><br></pre></td></tr></table></figure>
<h4 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h4><ul>
<li><code>transient</code> 修饰的变量不参与序列化。例：Map中的entrySet变量</li>
<li><code>native</code> 与C++联合开发时使用，使用此关键字说明这个方法是用C/C++语言实现的，并且被编译成了DLL，由java去调用。例如：Object的<code>hashCode()</code>，<code>getClass()</code>等。<em>参考：<a href="https://www.cnblogs.com/KingIceMou/p/7239668.html" target="_blank" rel="noopener">https://www.cnblogs.com/KingIceMou/p/7239668.html</a></em></li>
<li><code>volatile</code>标识修饰的变量随时可能被修改，所修饰变量的值被修改后会立即被写入主存。可见性，有序性，不具备原子性，是一种比<strong>sychronized</strong>更轻量级别的同步机制。</li>
</ul>
<h4 id="输出流"><a href="#输出流" class="headerlink" title="输出流"></a>输出流</h4><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; System.out和System.err，为 标准输出流 和 标准错误输出流</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>out存在缓冲区；err不存在缓冲区，只要有内容立即输出。【然而目前的验证发现并不是这样，err在out上面时，也存在先输出out，之后才输出err的情况】</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SystemOutTest</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">static</span></span><br><span class="line">	&#123;</span><br><span class="line">		System.out.println(<span class="string">"1"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	&#123;</span><br><span class="line">		System.out.println(<span class="string">"2"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">SystemOutTest</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		System.err.println(<span class="string">"3"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//main方法所在的类会先被加载</span></span><br><span class="line">		<span class="comment">//1、加载SystemOutTest，执行clinit()，只执行一遍</span></span><br><span class="line">		<span class="comment">//clinit()由静态代码块，静态变量赋值代码组成，顺序按照从上到下执行</span></span><br><span class="line">		<span class="comment">//2、new一个对象时，会执行init()</span></span><br><span class="line">		<span class="comment">//init()由非静态代码块，非静态变量赋值代码  和构造函数组成，前面两个按照顺序从上到下执行，构造函数一定最后执行</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//所以按理说，应该是先输出1（clinit()），然后输出2最后输出3（init()）</span></span><br><span class="line">		<span class="comment">//但是由于err是没有缓冲的，out存在缓冲，所以3的输出是随机的。1、2输出顺序固定（都在缓冲区，1较之2先输出）</span></span><br><span class="line">		<span class="comment">//可能的输出 3 1 2     1 3 2     1 2 3</span></span><br><span class="line">		<span class="keyword">new</span> SystemOutTest();</span><br><span class="line"></span><br><span class="line">		<span class="comment">//如果将out都改为err；或者将err改为out，那么一定会输出1 2 3</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="内部类"><a href="#内部类" class="headerlink" title="内部类"></a>内部类</h4><p><em>参考连接：<a href="https://blog.csdn.net/weixin_44929171/article/details/90318941" target="_blank" rel="noopener">https://blog.csdn.net/weixin_44929171/article/details/90318941</a></em></p>
<blockquote>
<p>将类定义在一个类内部，即成为了内部类。内部类产生的class文件名为“外部类$内部类”</p>
</blockquote>
<p>成员内部类、局部内部类、匿名内部类、静态内部类。</p>
<h5 id="成员内部类"><a href="#成员内部类" class="headerlink" title="成员内部类"></a>成员内部类</h5><blockquote>
<p><strong>成员内部类中不能定义static变量和static方法</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> JBasic;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 成员内部类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OuterClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> x;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getX</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setX</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x+<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//成员内部类，就像这个类的成员</span></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InnerClass</span></span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> a;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> a+<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        OuterClass out = <span class="keyword">new</span> OuterClass();</span><br><span class="line">        out.setX(<span class="number">3</span>);</span><br><span class="line">        System.out.println(out.func());</span><br><span class="line"></span><br><span class="line">        InnerClass in = out.new InnerClass();</span><br><span class="line">        in.a = <span class="number">1</span>;</span><br><span class="line">        System.out.println(in.func());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="局部内部类"><a href="#局部内部类" class="headerlink" title="局部内部类"></a>局部内部类</h5><blockquote>
<p>在类的方法中，作为局部的类，不能被任何其他地方引用。就像局部变量一样，因此不能有任何访问修饰符</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> JBasic;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 局部内部类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PartClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> x;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//局部内部类，就像局部变量</span></span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">InnerClass</span></span>&#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"局部内部类..."</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> func = <span class="keyword">new</span> InnerClass().func();</span><br><span class="line">        <span class="keyword">return</span> x + func;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        PartClass part = <span class="keyword">new</span> PartClass();</span><br><span class="line">        part.x = <span class="number">5</span>;</span><br><span class="line">        System.out.println(part.func());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="匿名内部类"><a href="#匿名内部类" class="headerlink" title="匿名内部类"></a>匿名内部类</h5><blockquote>
<p>类的定义和创建一起完成，目的是创建一个<strong>只使用一次的类</strong>的实例。作用是为了简化书写</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> JBasic;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 匿名内部类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnonyClass</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Inner()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"匿名内部类中方法的执行"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        AnonyClass anony = <span class="keyword">new</span> AnonyClass();</span><br><span class="line">        anony.func();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="静态内部类"><a href="#静态内部类" class="headerlink" title="静态内部类"></a>静态内部类</h5><blockquote>
<p>与类的其他成员相似，静态内部类使用static修饰，也称嵌套类</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> JBasic;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 静态内部类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> x = <span class="number">3</span>;</span><br><span class="line">    <span class="comment">//静态内部类</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">InnerClass</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">int</span> b = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> a + x;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">func2</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> b + x;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(InnerClass.b);<span class="comment">//2</span></span><br><span class="line"></span><br><span class="line">        InnerClass inner = <span class="keyword">new</span> InnerClass();</span><br><span class="line">        System.out.println(inner.func2());<span class="comment">//5</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>静态内部类中可以定义静态成员，而成员内部类不能；</strong></li>
<li><strong>静态内部类只能访问外层类的静态成员，成员内部类可以访问外层类的实例成员和静态成员；</strong></li>
<li><strong>创建静态内部类的实例不需要先创建一个外层类的实例；相反，创建成员内部类实例，必须先创建一个外层类的实例。</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="function">K <span class="title">getKey</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function">V <span class="title">getValue</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function">V <span class="title">setValue</span><span class="params">(V value)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> &lt;K extends Comparable&lt;? <span class="keyword">super</span> K&gt;, V&gt; Comparator&lt;Map.Entry&lt;K,V&gt;&gt; comparingByKey() &#123;</span><br><span class="line">            <span class="keyword">return</span> (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)</span><br><span class="line">                (c1, c2) -&gt; c1.getKey().compareTo(c2.getKey());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> &lt;K, V extends Comparable&lt;? <span class="keyword">super</span> V&gt;&gt; Comparator&lt;Map.Entry&lt;K,V&gt;&gt; comparingByValue() &#123;</span><br><span class="line">            <span class="keyword">return</span> (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)</span><br><span class="line">                (c1, c2) -&gt; c1.getValue().compareTo(c2.getValue());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> &lt;K, V&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByKey(Comparator&lt;? <span class="keyword">super</span> K&gt; cmp) &#123;</span><br><span class="line">            Objects.requireNonNull(cmp);</span><br><span class="line">            <span class="keyword">return</span> (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)</span><br><span class="line">                (c1, c2) -&gt; cmp.compare(c1.getKey(), c2.getKey());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> &lt;K, V&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByValue(Comparator&lt;? <span class="keyword">super</span> V&gt; cmp) &#123;</span><br><span class="line">            Objects.requireNonNull(cmp);</span><br><span class="line">            <span class="keyword">return</span> (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)</span><br><span class="line">                (c1, c2) -&gt; cmp.compare(c1.getValue(), c2.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="原生命令编译java代码"><a href="#原生命令编译java代码" class="headerlink" title="原生命令编译java代码"></a>原生命令编译java代码</h4><p>D盘下存在一文件：Hello.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.insist.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"hello world!"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在D盘根路径唤出cmd命令行，执行命令<code>javac Hello.java</code>，该命令表示用java编译器编译<code>Hello.java</code>文件，编译成功，什么都不显示。生成字节码文件<code>Hello.class</code>。</p>
<p>执行命令<code>java Hello</code>，该命令表示用java虚拟机解释并执行<code>Hello</code>类，发现出错：错误: 找不到或无法加载主类 Hello。</p>
<p>原因：一个类的全名是包名+类名，所以类Hello的全名是：<code>com.insist.demo.Hello</code>。</p>
<p>javac命令不会出错是因为javac编译的是文件，存在<code>Hello.java</code>这个文件，所以不出错。</p>
<p>java命令出错是因为不存在<code>Hello</code>这个类。</p>
<p>解决方案：在D盘下新建com/insist/demo文件夹（三个文件夹），将Hello.class放到com/insist/demo文件夹下，然后在D盘根路径唤出cmd命令行，执行<code>java com.insist.demo.Hello</code>即可成功，打印出<code>hello world</code>。</p>
<h4 id="类、对象的加载过程"><a href="#类、对象的加载过程" class="headerlink" title="类、对象的加载过程"></a>类、对象的加载过程</h4><p><strong>main方法所在的类会先被初始化</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Father.java:</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">	xxx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Son.java:</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">    xxx</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        Father f = <span class="keyword">new</span> Father();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">虽然main()中的代码是先对Father进行实例化得到f，按理说应该先对Father类初始化，再进行f的实例初始化。但是main方法所在的类会先被初始化，所以Son类会先被初始化。又因为Son是Father的子类，子类初始化需先初始化父类，所以还是会先对Father类初始化。</span><br></pre></td></tr></table></figure>
<p><strong>类初始化</strong>过程：</p>
<blockquote>
<p>类被初始化的触发条件：第一次用到该类，就可以说是第一次有new他的对象的时候，会先进行类初始化。</p>
<p>还有就是main方法所在的类会先进行初始化</p>
</blockquote>
<p>执行clinit()，该方法由<strong>静态类变量显示赋值代码</strong>，<strong>静态代码块</strong>组成，从上到下顺序执行。子类初始化需先初始化父类。只执行一次clinit()。</p>
<p>clinit()是虚拟机帮我们生成的，在类得字节码文件(class文件)中能够看到。classinit</p>
<p><strong>实例初始化</strong>过程：</p>
<p>执行init()，init()可能有多个，有几个构造方法就有几个init()，该方法由<strong>非静态类变量显示赋值代码</strong>，<strong>非静态代码块</strong>（从上到下顺序执行）和<strong>对应构造函数</strong>代码（最后执行）组成。init()的首行一定是super()或super(实参列表)，即对应父类的init()。每次创建一个对象，都要执行一次init()。</p>
<p>哪些方法不能被重写？</p>
<p>final方法</p>
<p>静态方法</p>
<p>private修饰的子类不可见的方法</p>
<p><code>Father.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hx.insist.com.Demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> i = test();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> j = method();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"1"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Father()&#123;</span><br><span class="line">        System.out.println(<span class="string">"2"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">"3"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"4"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">method</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"5"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Son.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hx.insist.com.Demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> i = test();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> j = method();</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"6"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Son()&#123;</span><br><span class="line">        System.out.println(<span class="string">"7"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">"8"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"9"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">method</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"10"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Son s1 = <span class="keyword">new</span> Son();</span><br><span class="line">        System.out.println();</span><br><span class="line">        Son s2 = <span class="keyword">new</span> Son();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>分析</strong>：存在main()方法，先对main()所在的类进行初始化，执行Son()的clinit()。Son是Father的子类，所以先执行Father的clinit()，再执行Son的clinit()。</p>
<p>Father的clinit()由<strong>静态变量显示赋值代码</strong>和<strong>静态代码块</strong>组成，就是这些：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> j = method();</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"1"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>执行静态变量j的显示赋值代码时，会执行method()，输出<strong>5</strong>，此时子类存在同名的静态方法，但是静态方法是不能被子类重写的，所以这个地方还是会执行父类自己的静态方法method()。</p>
<p>然后输出<strong>1</strong>。</p>
<p>Son的clinit()由静态变量显示赋值代码和静态代码块组成，就是这些：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> j = method();</span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">"6"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>和上面一样，执行method()，输出<strong>10</strong>。然后输出<strong>6</strong>。</p>
<p>以上就是在发现main()方法时，进行的动作：进行main()方法所在类的初始化（类Son的初始化），然后由于Son是子类，所以要先执行其父类Father的初始化。</p>
<p>接着开始执行代码：<code>Son s1 = new Son();</code></p>
<p>执行这句代码时要用到类Son，所以要先初始化类，由于之前类Son已经初始化过了，一个类只会被初始化一次，所以不再进行初始化，这里new一个对象，就是进行了对象的初始化（或称实例初始化）。对象初始化会执行对象的init()方法。init()由<strong>super()</strong>，<strong>非静态变量显示赋值代码</strong>，<strong>非静态代码块</strong>和<strong>对应构造函数</strong>组成，super()就是执行父类的init()。所以先执行Father的super()，非静态变量显示赋值代码，非静态代码块，对应构造函数。然后再执行子类Son的非静态变量显示赋值代码，非静态代码块，对应构造函数。</p>
<p>Father的super()是执行Object类的init()，不会由输出，不管。</p>
<p>Father的非静态变量显示赋值代码，非静态代码块，对应构造函数是这些：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> i = test();</span><br><span class="line">Father()&#123;</span><br><span class="line">    System.out.println(<span class="string">"2"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">    System.out.println(<span class="string">"3"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>非静态变量显示赋值代码</strong>，<strong>非静态代码块</strong>从上到下顺序执行，<strong>对应构造函数</strong>一定是最后执行。所以先执行i的赋值语句<code>i = test()</code>，这句代码会执行test()，但是子类也同时存在一个同名的重写函数test()，又由于父类的test()是public修饰的普通函数，所以test()会被子类覆盖，执行为子类的test()。【也可以这样理解：执行非静态方法时，前面都有一个默认的对象this，执行test()，其实执行的是this.test()。而this代表当前对象，当前正在创建Son对象，所以this代表Son对象，执行this.test()就是执行Son的test()。】这里是不是多态还有待考究，因为多态一定要是基类指针指向子类对象，而这里的this指针到底是代表Father还是Son，我还不清楚，我感觉是Son。如果this指针是指向Son的话，这里就不是多态了，用派生类的指针调用派生类的方法，当然是理所应当的。只有当使用基类指针：指向Father的指针调用test()时，才会产生调用自己的test()还是调用被子类重写的test()这个问题，答案是调用被重写的test()，这样才是态。</p>
<p>综上，会先调用子类的test()，输出<strong>9</strong>，然后输出<strong>3</strong>，最后输出<strong>2</strong>。</p>
<p>接着执行子类的init()：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> i = test();</span><br><span class="line">Son()&#123;</span><br><span class="line">    System.out.println(<span class="string">"7"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">    System.out.println(<span class="string">"8"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>执行<code>i = test()</code>，调用子类的test()方法，输出<strong>9</strong>，然后输出<strong>8</strong>，最后输出<strong>7</strong>。</p>
<p>所以会先输出：5    1    10    6    9    3    2    9    8    7</p>
<p>然后执行<code>System.out.println();</code>换行。</p>
<p>最后执行<code>Son s2 = new Son();</code>。没new一个对象就会进行一次对象初始化（或称实例初始化），所以还会再执行一次上述对象初始化过程，输出：9    3    2    9    8    7</p>
<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><blockquote>
<p> String、StringBuffer、StringBuilder</p>
</blockquote>
<p>三者在执行速度方面的比较：<strong>StringBuilder &gt;  StringBuffer  &gt;  String</strong></p>
<p>StringBuilder比StringBuffer块的原因：<strong>StringBuilder线程不安全</strong>，单线程使用较为合适。</p>
<p>StringBuilder和StringBuffer都比String块的原因：<strong>String是字符串常量</strong>，其他两个是字符串变量。</p>
<blockquote>
<p>StringBuffer多线程安全的原因：在许多方法上添加了synchronized锁</p>
</blockquote>
<p><strong>对于三者使用的总结</strong>： 1.如果要操作少量的数据 = String</p>
<p>　　　　　　　　　　 2.单线程操作字符串缓冲区 下操作大量数据 = StringBuilder</p>
<p>　　　　　　　　　　 3.多线程操作字符串缓冲区 下操作大量数据 = StringBuffer</p>
<p> 为什么把String，StringBuffer，StringBuilder都设计称final的，而其他类比如ArrayList，就不是final的？</p>
<p>主要是为了”效率“和”安全性“，如果指定一个类为 final，则该类所有的方法都是 final。java 编译器会寻找内联所有的 final 方法。 此举能够使性能平均提高 50%。（咱也不懂啥意思）</p>
<h3 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h3><p><strong>总述</strong></p>
<p><code>Iterable</code></p>
<blockquote>
<p>实现这个接口允许对象成为 “foreach” 语句的目标。 所有<strong>单例集合</strong>均实现此接口，双利集合Map凭entrySet得到的Set集合是单例的，所以间接的也可以使用foreach。</p>
</blockquote>
<p><code>Collection</code></p>
<p>抽象类<code>AbstractCollection</code>    实现Collection</p>
<p>抽象类<code>AbstractList</code>    实现List</p>
<p><code>ArrayList</code>，<code>LinkedList</code>，线程不安全</p>
<p>示意图：</p>
<p><a href="https://imgchr.com/i/MGqXyn" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/11/13/MGqXyn.md.jpg" alt="MGqXyn.md.jpg"></a></p>
<p>-</p>
<p><img src="https://s2.ax1x.com/2019/11/15/MdTT7n.png" alt="MdTT7n.png"></p>
<p>-</p>
<p><img src="https://s2.ax1x.com/2019/11/16/M0Q461.png" alt="M0Q461.png"></p>
<p>-</p>
<h4 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h4><blockquote>
<p> <code>ArrayList</code>内部是用Object[]数组实现的，非线程安全，效率高。便于索引，在不扩容的情况下也便于增插。基本来说是增删慢，查询快。</p>
</blockquote>
<p><strong>ArrayList扩容机制</strong>：若初始集合list没有指定容量，那么默认内部维护的数组长度为0。则首次进行add()操作时，会扩容为<code>DEFAULT_CAPACITY</code>，即为10；若指定了容量，则扩容时，将容量增加一半：<code>newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1)</code>。</p>
<p>这个增加有个细节：如果指定的容量为1，那么执行<code>newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1)</code>后<code>newCapacity</code>还是1，无法扩容，所以java增加了保护机制，添加判断</p>
<p><code>if (newCapacity - minCapacity &lt; 0)      newCapacity = minCapacity;</code>，此情况适用于指定容量为1时，1-2&lt;0 所以设置<code>newCapacity</code> = 2。保证扩容成功。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//这里保证数组长度为0时，将长度设置为10</span></span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ensureExplicitCapacity(minCapacity);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//他这个 minCapacity 变量的意思是指：这次添加操作所需要的最小空间，这个最小空间在常规情况下（数组长度不为0）是size+1；在另一种情况下（数组长度为0），是DEFAULT_CAPACITY，即10</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureExplicitCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// overflow-conscious code  如果最小空间 &gt; 数组长度，就需要扩容了</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        grow(minCapacity);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="keyword">int</span> oldCapacity = elementData.length;</span><br><span class="line">    <span class="comment">//扩容机制：增加一半</span></span><br><span class="line">    <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//如果扩容后，仍然不能满足最小容量，就直接设置新容量为最小容量。（此情况适用于设置的容量为1。保证了原始容量为1时也能扩容成功）</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)<span class="comment">//Interger的最大值</span></span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    <span class="comment">// minCapacity is usually close to size, so this is a win:</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);<span class="comment">//将数组elementData拷贝newCapacity个元素返回给elementData</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ArrayList的插入元素：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">List list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">list.add(<span class="number">2</span>);</span><br><span class="line">list.add(<span class="number">5</span>);</span><br><span class="line">list.add(<span class="number">1</span>);</span><br><span class="line">list.add(<span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">list.add(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">System.out.println(list.toString());</span><br></pre></td></tr></table></figure>
<blockquote>
<p> 原理：先将index后的元素通过<strong>拷贝覆盖的方式后移</strong>，然后像普通add()一样elementData[index] = element</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">    rangeCheckForAdd(index);</span><br><span class="line"></span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">    <span class="comment">//多了这一步，让index后面的元素后移（这里的操作是拷贝覆盖）</span></span><br><span class="line">    System.arraycopy(elementData, index, elementData, index + <span class="number">1</span>,</span><br><span class="line">                     size - index);</span><br><span class="line">    elementData[index] = element;</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ArrayList的清空clear()：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list.clear();<span class="comment">//for (int i = 0; i &lt; size; i++) elementData[i] = null;</span></span><br></pre></td></tr></table></figure>
<p><strong>ArrayList的get()：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(list.get(<span class="number">3</span>));<span class="comment">// return (E) elementData[index];</span></span><br></pre></td></tr></table></figure>
<p><strong>ArrayList的移除元素remove()：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">list.remove(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    rangeCheck(index);</span><br><span class="line"></span><br><span class="line">    modCount++;</span><br><span class="line">    E oldValue = elementData(index);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> numMoved = size - index - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">        System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index,</span><br><span class="line">                         numMoved);</span><br><span class="line">    elementData[--size] = <span class="keyword">null</span>; <span class="comment">// clear to let GC do its work</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中，重点就是这个<code>System.arraycopy();</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*  public static void arraycopy(Object src, int srcPos, Object dest, int destPos, int length)</span></span><br><span class="line"><span class="comment">* 代码解释:</span></span><br><span class="line"><span class="comment">        Object src : 原数组</span></span><br><span class="line"><span class="comment">        int srcPos : 从元数据的起始位置开始</span></span><br><span class="line"><span class="comment">        Object dest : 目标数组</span></span><br><span class="line"><span class="comment">        int destPos : 目标数组的开始起始位置</span></span><br><span class="line"><span class="comment">        int length  : 要copy的数组的长度</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>举个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">list.add(<span class="number">2</span>);</span><br><span class="line">list.add(<span class="number">5</span>);</span><br><span class="line">list.add(<span class="number">1</span>);</span><br><span class="line">list.add(<span class="number">8</span>);</span><br><span class="line">list.remove(<span class="number">2</span>);</span><br><span class="line">System.out.println(list.toString());</span><br></pre></td></tr></table></figure>
<p>其实就是</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] arr = &#123;<span class="number">2</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;<span class="comment">//没有设置容量，第一次add()会将length设置为10</span></span><br><span class="line"><span class="keyword">int</span>[] brr = &#123;<span class="number">2</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="comment">//通过上面一番计算得到数字</span></span><br><span class="line">System.arraycopy(arr,<span class="number">3</span>,brr,<span class="number">2</span>,<span class="number">7</span>);</span><br><span class="line">System.out.println(Arrays.toString(arr));<span class="comment">// &#123;2,5,1,8,0,0,0,0,0,0&#125;;</span></span><br><span class="line">System.out.println(Arrays.toString(brr));<span class="comment">// &#123;2,5,8,0,0,0,0,0,0,0&#125;;</span></span><br></pre></td></tr></table></figure>
<h4 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h4><blockquote>
<p>底层结构是数组 Object[] ，线程安全（所有操作在方法上面加上<code>synchronized</code>关键字），增删慢，查询快.</p>
</blockquote>
<p>如果没有设置初始容量，那么初始容量是10：<code>this(10);</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Vector</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Vector</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(initialCapacity, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Vector</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">int</span> capacityIncrement)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal Capacity: "</span>+</span><br><span class="line">                                           initialCapacity);</span><br><span class="line">    <span class="keyword">this</span>.elementData = <span class="keyword">new</span> Object[initialCapacity];<span class="comment">//这里初始化大小</span></span><br><span class="line">    <span class="keyword">this</span>.capacityIncrement = capacityIncrement;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>操作</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Vector v = <span class="keyword">new</span> Vector();</span><br><span class="line">v.add(<span class="number">2</span>);</span><br><span class="line">v.addElement(<span class="number">3</span>);<span class="comment">//从JDK1.2后开始出现</span></span><br><span class="line">v.get(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<h4 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h4><blockquote>
<p>LinkedList内部的数据结构是双向链表，因此没有扩容机制这一说。非线程安全，增快，插、查、删都需要遍历index个元素，所以较慢，效率低。</p>
</blockquote>
<p><strong>实现原理：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span>&lt;<span class="title">E</span>&gt; </span></span><br><span class="line"><span class="class">        <span class="keyword">extends</span> <span class="title">AbstractSequentialList</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt;, <span class="title">Deque</span>&lt;<span class="title">E</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">transient</span> Node&lt;E&gt; first;</span><br><span class="line">    <span class="keyword">transient</span> Node&lt;E&gt; last;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">        E item;</span><br><span class="line">        Node&lt;E&gt; next;</span><br><span class="line">        Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">        Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class="line">            <span class="keyword">this</span>.item = element;</span><br><span class="line">            <span class="keyword">this</span>.next = next;</span><br><span class="line">            <span class="keyword">this</span>.prev = prev;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>增加</strong>元素<code>add()</code>：直接增加，改变指针指向即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加元素，保证双向链表为双向的关键操作</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    linkLast(e);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">linkLast</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last;<span class="comment">//l记录之前最后的元素</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(l, e, <span class="keyword">null</span>);<span class="comment">//新节点的pre指向之前最后的元素（前指），next指向null</span></span><br><span class="line">    last = newNode;<span class="comment">//将维护的last指向最新加入的节点</span></span><br><span class="line">    <span class="keyword">if</span> (l == <span class="keyword">null</span>)<span class="comment">//如果l为null说明目前只有一个元素</span></span><br><span class="line">        first = newNode;<span class="comment">//fist = last = newNode</span></span><br><span class="line">    <span class="keyword">else</span><span class="comment">//否则将之前最后的元素的next指向新节点（后指）</span></span><br><span class="line">        l.next = newNode;</span><br><span class="line">    <span class="comment">//通过前指后指完成双向链表</span></span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>插入</strong>元素add(index,e)：由于一般情况下都要<strong>遍历index次</strong>，所以效率较低</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">    checkPositionIndex(index);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (index == size)</span><br><span class="line">        linkLast(element);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        linkBefore(element, node(index));<span class="comment">//我们看到这里插入元素时要先执行node(index)遍历index</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>查找</strong>元素：get()：<strong>要遍历index个元素</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    <span class="keyword">return</span> node(index).item;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Node&lt;E&gt; <span class="title">node</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert isElementIndex(index);</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; (size &gt;&gt; <span class="number">1</span>)) &#123;</span><br><span class="line">        Node&lt;E&gt; x = first;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; i++)</span><br><span class="line">            x = x.next;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;E&gt; x = last;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = size - <span class="number">1</span>; i &gt; index; i--)</span><br><span class="line">            x = x.prev;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>删除</strong>元素：remove(index i)，remove(Object o)：<strong>要遍历index个元素</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    <span class="keyword">return</span> unlink(node(index));<span class="comment">//我们看到这里插入元素时要先执行node(index)遍历index</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next) &#123;<span class="comment">//循环遍历</span></span><br><span class="line">            <span class="keyword">if</span> (x.item == <span class="keyword">null</span>) &#123;</span><br><span class="line">                unlink(x);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (o.equals(x.item)) &#123;</span><br><span class="line">                unlink(x);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="比较："><a href="#比较：" class="headerlink" title="比较："></a>比较：</h4><p>ArrayList在不涉及扩容时，增，查非常快；删，插都要进行<code>System.arraycopy()</code>，通过拷贝覆盖的方式移动元素，所以效率一般，不是太慢。而在涉及扩容时，增操作要计算容量，再进行拷贝操作<code>elementData = Arrays.copyOf(elementData, newCapacity);</code>，所以效率稍微会慢。</p>
<p>LinkedList进行增操作时，只需改变指针指向，较快。而在进行插、查、删操作时都要遍历index个元素才能找到进行操作的位置（然后再改变指针指向），所以较慢。</p>
<h4 id="集合的线程安全性"><a href="#集合的线程安全性" class="headerlink" title="集合的线程安全性"></a>集合的线程安全性</h4><p><strong>请问 ArrayList、 HashSet、 HashMap 是线程安全的吗？如果不是我想要线程安全的集合怎么办？</strong> </p>
<blockquote>
<p>查看这些集合的源码可知，每个方法都没有加锁，显然<strong>都是线程不安全</strong>的。</p>
<p>在集合中 <strong>Vector 和 HashTable 倒是线程安全的</strong>。你打开源码会发现其实就是把各自核心方法添加上了<br>synchronized 关键字 。</p>
</blockquote>
<p>如果想要线程安全的集合可以使用Collections工具类：可以让上面那 3 个不安全的集合变为安全的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Object&gt; list1 = Collections.synchronizedList(<span class="keyword">new</span> LinkedList&lt;&gt;());</span><br><span class="line">List&lt;Object&gt; list2 = Collections.synchronizedList(<span class="keyword">new</span> ArrayList&lt;&gt;());</span><br><span class="line">Set&lt;Object&gt; set1 = Collections.synchronizedSet(<span class="keyword">new</span> HashSet&lt;&gt;());</span><br><span class="line">Set&lt;Object&gt; set2 = Collections.synchronizedSet(<span class="keyword">new</span> TreeSet&lt;&gt;());</span><br><span class="line">Map map = Collections.synchronizedMap(<span class="keyword">new</span> HashMap&lt;&gt;());</span><br></pre></td></tr></table></figure>
<p>原理：<strong>将集合的核心方法添加上了 synchronized 关键字。</strong> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronizedList</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">                        <span class="keyword">extends</span> <span class="title">SynchronizedCollection</span>&lt;<span class="title">E</span>&gt;</span></span><br><span class="line"><span class="class">                        <span class="keyword">implements</span> <span class="title">List</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">            <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">7754090372962971524L</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">final</span> List&lt;E&gt; list;</span><br><span class="line"></span><br><span class="line">            SynchronizedList(List&lt;E&gt; list) &#123;</span><br><span class="line">                <span class="keyword">super</span>(list);</span><br><span class="line">                <span class="keyword">this</span>.list = list;</span><br><span class="line">            &#125;</span><br><span class="line">            SynchronizedList(List&lt;E&gt; list, Object mutex) &#123;</span><br><span class="line">                <span class="keyword">super</span>(list, mutex);</span><br><span class="line">                <span class="keyword">this</span>.list = list;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//将list的操作都加synchronized关键字，然后调用其本来的操作。例如</span></span><br><span class="line">            <span class="comment">/*public void add(int index, E element) &#123;</span></span><br><span class="line"><span class="comment">                synchronized (mutex) &#123;</span></span><br><span class="line"><span class="comment">                	list.add(index, element);</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">            &#125;*/</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span> == o)</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                <span class="keyword">synchronized</span> (mutex) &#123;<span class="keyword">return</span> list.equals(o);&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (mutex) &#123;<span class="keyword">return</span> list.hashCode();&#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (mutex) &#123;<span class="keyword">return</span> list.get(index);&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> E <span class="title">set</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (mutex) &#123;<span class="keyword">return</span> list.set(index, element);&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (mutex) &#123;list.add(index, element);&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (mutex) &#123;<span class="keyword">return</span> list.remove(index);&#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (mutex) &#123;<span class="keyword">return</span> list.indexOf(o);&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lastIndexOf</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (mutex) &#123;<span class="keyword">return</span> list.lastIndexOf(o);&#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(<span class="keyword">int</span> index, Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (mutex) &#123;<span class="keyword">return</span> list.addAll(index, c);&#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">public</span> ListIterator&lt;E&gt; <span class="title">listIterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> list.listIterator(); <span class="comment">// Must be manually synched by user</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">public</span> ListIterator&lt;E&gt; <span class="title">listIterator</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> list.listIterator(index); <span class="comment">// Must be manually synched by user</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">public</span> List&lt;E&gt; <span class="title">subList</span><span class="params">(<span class="keyword">int</span> fromIndex, <span class="keyword">int</span> toIndex)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (mutex) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> SynchronizedList&lt;&gt;(list.subList(fromIndex, toIndex),</span><br><span class="line">                            mutex);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">replaceAll</span><span class="params">(UnaryOperator&lt;E&gt; operator)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (mutex) &#123;list.replaceAll(operator);&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparator&lt;? <span class="keyword">super</span> E&gt; c)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (mutex) &#123;list.sort(c);&#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">private</span> Object <span class="title">readResolve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> (list <span class="keyword">instanceof</span> RandomAccess</span><br><span class="line">                        ? <span class="keyword">new</span> SynchronizedRandomAccessList&lt;&gt;(list)</span><br><span class="line">                        : <span class="keyword">this</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>这里加的锁是<code>mutex</code>，就是<strong>this</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Collection&lt;E&gt; c;  <span class="comment">// Backing Collection</span></span><br><span class="line"><span class="keyword">final</span> Object mutex;     <span class="comment">// Object on which to synchronize</span></span><br><span class="line">SynchronizedCollection(Collection&lt;E&gt; c) &#123;</span><br><span class="line">    <span class="keyword">this</span>.c = Objects.requireNonNull(c);</span><br><span class="line">    mutex = <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h4><blockquote>
<p>基于数组+链表的数据结构实现，数组的元素是节点Node，节点中有Node next，可形成链表。</p>
<p>非线程安全，高效，支持Null值和Null键，</p>
</blockquote>
<p><strong>HashMap究竟是怎么数组加链表实现的：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;, <span class="title">Cloneable</span>, <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//数组</span></span><br><span class="line">    <span class="keyword">transient</span> Node&lt;K,V&gt;[] table;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">transient</span> Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet;</span><br><span class="line">    <span class="keyword">transient</span> <span class="keyword">int</span> size;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//静态内部类</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> hash;</span><br><span class="line">        <span class="comment">//K,V</span></span><br><span class="line">        <span class="keyword">final</span> K key;</span><br><span class="line">        V value;</span><br><span class="line">        <span class="comment">//链表</span></span><br><span class="line">        Node&lt;K,V&gt; next;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//必须有这些构造方法，否则final没有初始化会报错</span></span><br><span class="line">        Node(<span class="keyword">int</span> hash, K key, V value, Node&lt;K,V&gt; next) &#123;</span><br><span class="line">            <span class="keyword">this</span>.hash = hash;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">            <span class="keyword">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>HashMap对元素储存的方式：先调用key的hashCode()，将得到的值对数组长度取模运算，就可以得到此key在数组中对应的位置。然后看该位置是否有元素，如果没有就直接放入；如果有就调用key.equels()对该元素进行比较，看是否返回true，如果是true，代表两元素相同，则使用原key，新value；若返回false，则代表不同，那么就接着链表后面的元素一直比较，直到链表末尾，如果没有相同的，那么就将此键值对添加到链表末尾。</p>
<p><em>详情请看我的另一篇详细文章：<a href="http://hanhanhanxu.coding.me/2019/06/10/Hash/" target="_blank" rel="noopener">http://hanhanhanxu.coding.me/2019/06/10/Hash/</a></em></p>
<p><strong>为什么HashMap的默认初始容量位16？</strong><br>为了减少hash碰撞，提高了查询速率，使元素较均匀的放在数组中。</p>
<p>解释：计算索引时HashMap是这样计算的：<code>return h &amp; (length-1);</code></p>
<p>这里的<strong>h是key.hashCode()</strong>，简单说就是一个数字；<strong>length是HashMap的容量</strong>，即16。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">length-<span class="number">1</span> = <span class="number">15</span> <span class="comment">//15的二进制为00000000 00000000 00000000 00001111</span></span><br><span class="line">这时我们考虑，任何一个数字和<span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00001111</span>进行与运算</span><br><span class="line">由于后四位全是<span class="number">1</span>，所以最终每位上得到的数字即可能是<span class="number">0</span> 也可能是<span class="number">1</span>.</span><br><span class="line">    例如：<span class="number">2</span>&amp;<span class="number">15</span></span><br><span class="line">    <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000010</span></span><br><span class="line">    <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00001111</span></span><br><span class="line">    得到</span><br><span class="line">    <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000010</span>  =  <span class="number">2</span></span><br><span class="line">    </span><br><span class="line">    例如：<span class="number">19</span>&amp;<span class="number">15</span></span><br><span class="line">    <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00010011</span></span><br><span class="line">    <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00001111</span></span><br><span class="line">    得到</span><br><span class="line">    <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000011</span>  =  <span class="number">3</span></span><br><span class="line">    </span><br><span class="line">    这样可以通过位运算达到取余的结果：<span class="number">2</span>%<span class="number">16</span> = <span class="number">2</span>; <span class="number">19</span>&amp;<span class="number">16</span> = <span class="number">3</span>,使最终得到的索引值尽可能均匀分布。</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">那为什么不是<span class="number">8</span>或者<span class="number">32</span>呢：如果容量不为<span class="number">16</span>，假如是<span class="number">8</span></span><br><span class="line">length-<span class="number">1</span> = <span class="number">7</span> <span class="comment">//7的二进制位00000000 00000000 00000000 00000111</span></span><br><span class="line">	<span class="number">2</span>&amp;<span class="number">7</span></span><br><span class="line">        <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000010</span></span><br><span class="line">        <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000111</span></span><br><span class="line">        得到</span><br><span class="line">        <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000010</span> = <span class="number">2</span></span><br><span class="line">    <span class="number">15</span>&amp;<span class="number">7</span></span><br><span class="line">        <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00001111</span></span><br><span class="line">        <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000111</span></span><br><span class="line">        得到</span><br><span class="line">        <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000111</span> = <span class="number">7</span></span><br><span class="line">    <span class="number">2</span>%<span class="number">8</span> = <span class="number">2</span>； <span class="number">15</span>%<span class="number">8</span> = <span class="number">7</span>，也可以通过位运算达到取余的结果，结果也对啊。那为什么不是<span class="number">8</span>或者<span class="number">32</span>呢??????????</span><br></pre></td></tr></table></figure>
<p><strong>为什么HashMap容量都是2的幂次方</strong></p>
<p>因为得到索引时，可以通过按位与(&amp;)操作来计算余数，比求模(%)更快，而且充分散列，减少碰撞。</p>
<p>当容量是2^n时，h &amp; (length -1) == h % length。</p>
<p><strong>扩容机制：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> DEFAULT_LOAD_FACTOR = <span class="number">0.75f</span>; <span class="comment">//填充因子 </span></span><br><span class="line"><span class="comment">//当hashmap的填充达到75%的时候，会进行扩容resize。条件是：HashMap.Size &gt;= Capacity*LoadFactor</span></span><br></pre></td></tr></table></figure>
<p>Hashmap的resize()包含<strong>扩容</strong>和<strong>ReHash</strong>两个步骤，<strong>ReHash在并发的情况下可能会形成链表环</strong>。</p>
<ul>
<li>扩容<br>创建一个新的Entry空数组，长度是原数组的2倍。</li>
<li>ReHash<br>遍历原Entry数组，把所有的Entry重新Hash到新数组。为什么要重新Hash呢？因为长度扩大以后，Hash的规则也随之改变。</li>
</ul>
<p><strong>为什么HashMap是线程不安全的？</strong></p>
<p>不安全原因：</p>
<p>(1)在put的时候，因为该方法不是同步的，假如有两个线程A,B它们的put的key的hash值相同，不论是从头插入还是从尾插入，假如A获取了插入位置为x，但是还未插入，此时B也计算出待插入位置为x，则不论AB插入的先后顺序肯定有一个会丢失</p>
<p>(2)在扩容的时候，jdk1.8之前是采用头插法，当两个线程同时检测到hashmap需要扩容，在进行同时扩容的时候有可能会造成链表的循环，主要原因就是，采用头插法，新链表与旧链表的顺序是反的，在<strong>JDK1.8后采用尾插法</strong>就不会出现这种问题，同时1.8的链表长度如果大于8就会转变成红黑树。</p>
<p><strong>为什么ConcurrentHashMap是线程安全的？</strong></p>
<p>ConcurrentHashMap采用锁分段技术，<strong>将整个Hash桶进行了分段segment，也就是将这个大的数组分成了几个小的片段segment</strong>，而且每个小的片段segment上面都有锁存在，那么在插入元素的时候就需要先找到应该插入到哪一个片段segment，然后再在这个片段上面进行插入，而且这里还需要获取segment锁。</p>
<p>ConcurrentHashMap让锁的粒度更精细一些，并发性能更好。</p>
<h4 id="Hashtable"><a href="#Hashtable" class="headerlink" title="Hashtable"></a>Hashtable</h4><blockquote>
<p>线程安全（所有操作在方法上面加上<code>synchronized</code>关键字），低效，不支持Null值和Null键</p>
</blockquote>
<p><strong>Hashtable的实现：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hashtable</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">Dictionary</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The hash table data.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> Entry&lt;?,?&gt;[] table;<span class="comment">//数组</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//静态内部类</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> hash;</span><br><span class="line">        <span class="comment">//K，V</span></span><br><span class="line">        <span class="keyword">final</span> K key;</span><br><span class="line">        V value;</span><br><span class="line">        <span class="comment">//链表 next指针</span></span><br><span class="line">        Entry&lt;K,V&gt; next;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="title">Entry</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, Entry&lt;K,V&gt; next)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.hash = hash;</span><br><span class="line">            <span class="keyword">this</span>.key =  key;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">            <span class="keyword">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="LinkedHashMap"><a href="#LinkedHashMap" class="headerlink" title="LinkedHashMap"></a>LinkedHashMap</h4><blockquote>
<p>HashMap的子类，保存了记录的插入顺序。</p>
</blockquote>
<h3 id="Hashmap和Hashtable"><a href="#Hashmap和Hashtable" class="headerlink" title="Hashmap和Hashtable"></a>Hashmap和Hashtable</h3><ul>
<li><p>HashMap不是线程安全的，Hashtable是线程安全的（方法被synchronized修饰）</p>
</li>
<li><p>HashMap允许nul的键值。</p>
</li>
<li>HashMap继承自AbstractMap，Hashtable继承自Dictionary</li>
</ul>
<h3 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h3><blockquote>
<p>反射：程序<strong>执行期间才知道操作的类是什么</strong>，并能在运行期间获得类的完整构造（结构），并可调用方法。</p>
</blockquote>
<h4 id="小例子"><a href="#小例子" class="headerlink" title="小例子"></a>小例子</h4><p><code>Apple.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Reflex;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Apple</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Demo.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Reflex;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//正常的调用</span></span><br><span class="line">        Apple apple = <span class="keyword">new</span> Apple();</span><br><span class="line">        apple.setPrice(<span class="number">5</span>);</span><br><span class="line">        System.out.println(<span class="string">"Apple Price:"</span> + apple.getPrice());</span><br><span class="line">        <span class="comment">//使用反射调用</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//拿到Class对象</span></span><br><span class="line">            Class&lt;?&gt; c = Class.forName(<span class="string">"Reflex.Apple"</span>);</span><br><span class="line">            <span class="comment">//拿到对象的构造方法</span></span><br><span class="line">            Constructor&lt;?&gt; con = c.getConstructor();</span><br><span class="line">            <span class="comment">//通过对象的构造创建实例</span></span><br><span class="line">            Object o = con.newInstance();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//取得set方法</span></span><br><span class="line">            Method set = c.getMethod(<span class="string">"setPrice"</span>, Integer.class);</span><br><span class="line">            <span class="comment">//执行set方法。传入参数：实例对象，需set的值</span></span><br><span class="line">            set.invoke(o, <span class="number">15</span>);</span><br><span class="line">            <span class="comment">//拿到get方法</span></span><br><span class="line">            Method get = c.getMethod(<span class="string">"getPrice"</span>);</span><br><span class="line">            <span class="comment">//执行get方法。</span></span><br><span class="line">            System.out.println(<span class="string">"Apple Price:"</span> + get.invoke(o));</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//得到Class对象的3种方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main1</span><span class="params">(String[] args)</span><span class="keyword">throws</span> ClassNotFoundException </span>&#123;</span><br><span class="line">    <span class="comment">//1、通过类路径</span></span><br><span class="line">    Class&lt;?&gt; aClass = Class.forName(<span class="string">"Reflex.one.User"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2、通过传入的类</span></span><br><span class="line">    Class&lt;User&gt; aClass1 = User.class;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3、通过类已经实例化的对象</span></span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    Class&lt;? extends User&gt; aClass2 = user.getClass();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过Class获得类实例对象的2种方式</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main2</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    Class&lt;User&gt; c = User.class;</span><br><span class="line">    <span class="comment">//1、通过Class直接newInstance。默认使用无参的构造函数实例化对象</span></span><br><span class="line">    Object instance = c.newInstance();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2、通过Class先得到类的构造函数，再通过构造函数newInstance。</span></span><br><span class="line">    <span class="comment">//好处：可以选择通过哪个构造函数来实例化对象</span></span><br><span class="line">    Constructor&lt;User&gt; constructor = c.getConstructor();</span><br><span class="line">    Object user = constructor.newInstance();</span><br><span class="line">    <span class="comment">//有参的构造函数</span></span><br><span class="line">    Constructor&lt;User&gt; constructor1 = c.getConstructor(Long.class, String.class, String.class);</span><br><span class="line">    Object user2 = constructor1.newInstance(<span class="number">111L</span>, <span class="string">"qqq"</span>, <span class="string">"eee"</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(user2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过Class获取类的属性</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Class&lt;User&gt; userClass = User.class;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//getFields()。无法获取私有属性和默认(default修饰)属性</span></span><br><span class="line">    <span class="comment">/*Field[] fields = userClass.getFields();</span></span><br><span class="line"><span class="comment">        for (Field field : fields) &#123;</span></span><br><span class="line"><span class="comment">            System.out.println(field.getName());</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//getDeclaredFields()。获取包括私有，默认属性在内的 全部属性</span></span><br><span class="line">    <span class="comment">/*Field[] declaredFields = userClass.getDeclaredFields();</span></span><br><span class="line"><span class="comment">        for (Field declaredField : declaredFields) &#123;</span></span><br><span class="line"><span class="comment">            System.out.println(declaredField.getName());</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"==========方法=============="</span>);</span><br><span class="line">    Method[] methods = userClass.getDeclaredMethods();</span><br><span class="line">    <span class="keyword">for</span> (Method method : methods) &#123;</span><br><span class="line">        System.out.println(<span class="string">"方法名："</span>+method.getName());</span><br><span class="line">        Class&lt;?&gt;[] types = method.getParameterTypes();</span><br><span class="line">        <span class="keyword">for</span> (Class&lt;?&gt; type : types) &#123;</span><br><span class="line">            System.out.println(type.getName());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        如果想要获取类的私有属性、方法、构造器，就要用到declared关键字</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*System.out.println("接下来是构造函数：");</span></span><br><span class="line"><span class="comment">        Constructor&lt;?&gt;[] declaredConstructors = userClass.getDeclaredConstructors();</span></span><br><span class="line"><span class="comment">        for (Constructor&lt;?&gt; declaredConstructor : declaredConstructors) &#123;</span></span><br><span class="line"><span class="comment">            System.out.println(declaredConstructor.getName());</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="实战方法"><a href="#实战方法" class="headerlink" title="实战方法"></a>实战方法</h4><blockquote>
<p>在真正实战中如果面对一个完全未知的类Class，想要通过反射操作此类或对象，那么最常用的是以下方法</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通常运用反射时，要向方法中传入xxx.class，所以我们已经拿到了Class</span></span><br><span class="line">Method[] methods = c.getDeclaredMethods();<span class="comment">//拿到所有方法</span></span><br><span class="line">method.getName()<span class="comment">//拿到此方法的名称</span></span><br><span class="line">Class&lt;?&gt;[] types = method.getParameterTypes();<span class="comment">//拿到method的参数类型</span></span><br><span class="line">method.invoke(o,data);<span class="comment">//执行对应方法</span></span><br></pre></td></tr></table></figure>
<p>我们通过拿到的所有方法，找到我们想要的方法，然后获取参数类型，就可执行对应方法。</p>
<hr>
<p><em>反射结合POI实战，请移步个人原创：<a href="https://github.com/hanhanhanxu/HPoiUtil" target="_blank" rel="noopener">https://github.com/hanhanhanxu/HPoiUtil</a></em></p>
<hr>
<h3 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h3><blockquote>
<p>请参见Thread.md</p>
</blockquote>
<h3 id="文件IO流"><a href="#文件IO流" class="headerlink" title="文件IO流"></a>文件IO流</h3><h4 id="File"><a href="#File" class="headerlink" title="File"></a>File</h4><blockquote>
<p>File既可以表示文件，也可以表示文件夹</p>
</blockquote>
<p>windows的路径分隔符为 \ （因为一个 \ 代表转义字符，所以要使用两个 \ \，第一个 \ 是转义字符，将第二个 \ 转换为它本来的意思），Unix/Liunx下的路径分隔符为 / 。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//利用File创建文件</span></span><br><span class="line">File file = <span class="keyword">new</span> File(<span class="string">"E:\\0面试\\a.txt"</span>);<span class="comment">//不存在的文件</span></span><br><span class="line"><span class="keyword">boolean</span> newFile = file.createNewFile();</span><br><span class="line">System.out.println(newFile);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//当创建已存在的文件时，会返回false</span></span><br><span class="line">File file = <span class="keyword">new</span> File(<span class="string">"E:\\0面试\\a.txt"</span>);</span><br><span class="line">System.out.println(file.createNewFile());<span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//File也可以表示文件夹</span></span><br><span class="line">File file = <span class="keyword">new</span> File(<span class="string">"E:\\0面试"</span>);<span class="comment">//已存在的文件夹</span></span><br><span class="line">System.out.println(file.isDirectory());<span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>更专业的方法是使用<code>File.separatorChar</code>，它会根据当前操作系统自动匹配路径分隔符。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(File.separatorChar);<span class="comment">//  \</span></span><br><span class="line">String filePath = <span class="string">"E:"</span> + File.separatorChar + <span class="string">"0面试"</span>;</span><br><span class="line">File file = <span class="keyword">new</span> File(filePath);</span><br><span class="line">System.out.println(file.isDirectory());<span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p><strong>通过File遍历某盘/目录下的所有文件：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo1</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> beginTimeMillis = System.currentTimeMillis();</span><br><span class="line">        File file  = <span class="keyword">new</span> File(<span class="string">"F:"</span>);</span><br><span class="line">        <span class="keyword">if</span>(file.exists())&#123;</span><br><span class="line">            printDir(file);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> endTimeMillis = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">long</span> cost = endTimeMillis - beginTimeMillis;</span><br><span class="line">        System.out.println(<span class="string">"共有文件："</span> + num + <span class="string">"个。"</span>);</span><br><span class="line">        System.out.println(<span class="string">"遍历耗时："</span> + cost + <span class="string">"豪秒。"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printDir</span><span class="params">(File file)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(file.isDirectory())&#123;</span><br><span class="line">            File[] files = file.listFiles();</span><br><span class="line">            <span class="keyword">for</span> (File file1 : files) &#123;</span><br><span class="line">                printDir(file1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            num++;</span><br><span class="line">            System.out.println(file.getAbsolutePath());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>File可以代表存在或不存在的文件/目录，存在的话可以操作此文件/目录，不存在的话可以创建此文件/目录。</p>
<p>这里的操作只是操作文件的基本信息。如果想要操作文件内部的内容，就需要用到IO流了。</p>
<h4 id="码表"><a href="#码表" class="headerlink" title="码表"></a>码表</h4><p>ASCII 美国标准信息交换码。用<strong>一个字节的7位</strong>表示字符，表示的都是英文字符和数字。</p>
<p>ISO8859-1 拉丁码表，又称Latin-1。欧洲码表，用<strong>一个字节</strong>的8位表示。ASCII码是包含的仅仅是英文字母，并且没有完全占满256个编码位置，所以它以ASCII为基础，在空置的0xA0-0xFF的范围内，加入192个字母及符号，藉以供使用变音符号的拉丁字母语言使用。从而支持德文，法文等。因而它依然是一个单字节编码，只是比ASCII更全面。</p>
<p>GB2312 英文占<strong>一个字节</strong>，中文占<strong>两个字节</strong>。中国的中文编码表。</p>
<p>GBK 中国的中文编码表升级，融合了更多的中文文字符号。</p>
<p>Unicode 国际标准码规范，融合了多种文字，所有文字都用<strong>两个字节</strong>表示。Java语言使用此码表。</p>
<p>UTF-8  万国码。1~3个字节不等长，英文1字节，中文3字节。最多用<strong>三个字节</strong>来表示一个字符。</p>
<p><strong>编码：</strong>字符串—-》字节数组。String类的getBytes()方法进行编码，将字符串转换为对应的二进制，并且这个方法可以指定编码表，默认使用操作系统的码表。</p>
<p>中国大陆Windows系统默认码表一般为GBK，如果你设置了你的IDE的码表，那么就可能改变。Java程序中可以使用<code>System.getProperty(&quot;file.encoding&quot;)</code>得到当前默认码表。</p>
<p><strong>解码：</strong>字节数组—–》字符串。String类的构造函数完成。可以指定码表。我们使用什么码表编码，就应该使用什么码表解码，否则很有可能出现乱码。</p>
<h4 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h4><blockquote>
<p>总述图</p>
</blockquote>
<p><a href="https://imgchr.com/i/MQP7LR" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/11/11/MQP7LR.md.png" alt="MQP7LR.md.png"></a></p>
<p><code>Closeable</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Closeable 是可以关闭的数据源或目标。调用 close 方法可释放对象保存的资源（如打开文件）。 </span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Closeable</span> <span class="keyword">extends</span> <span class="title">AutoCloseable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>字节流：处理的单元是一个字节。</p>
<p>字符流：字节流+码表。</p>
<h5 id="字节流"><a href="#字节流" class="headerlink" title="字节流"></a>字节流</h5><p>抽象父类<code>InputStream</code>，<code>OutputStream</code></p>
<p>子类<code>FileInputStream</code>，<code>FileOutputStream</code>，<code>BufferedInputStream</code>，<code>BufferedOutputStream</code></p>
<p><code>FileInputStream</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * FileInputStream的基本使用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileInputStreamDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//如果文件中绝对没有中文的话（只是英文字母和一些*().&amp;*&amp;/*-+这样的纯英文字符），那么可以使用read一个一个字节的读取</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//InputStream in = new FileInputStreamDemo("E:\\0面试\\a.txt");</span></span><br><span class="line">        InputStream in = <span class="keyword">new</span> java.io.FileInputStream(<span class="string">"E:\\1MYKNOW\\视频\\java\\java-传智播客基础班\\day23\\准备的数据.txt"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//read()  一个一个字节的读取</span></span><br><span class="line">        <span class="comment">//读取得到的返回值是字节对应的ascll码值 a 97，再将int型ascll码值 转换为 char型</span></span><br><span class="line">        <span class="comment">/*int sign;</span></span><br><span class="line"><span class="comment">        while((sign = in.read()) != -1)&#123;</span></span><br><span class="line"><span class="comment">            System.out.print((char)sign);</span></span><br><span class="line"><span class="comment">            System.out.print(" ");</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//read(byte[]) 字节缓存区读取。字节缓冲区不能全部输出，要根据读取得到的实际长度len进行输出</span></span><br><span class="line">        <span class="comment">//将read(byte[]) 一次性读取到的内容放入byte[]中，放入的是数字，即字符对应的ascll码值</span></span><br><span class="line">        <span class="comment">/*byte[] bytes = new byte[1024];</span></span><br><span class="line"><span class="comment">        int len = in.read(bytes);</span></span><br><span class="line"><span class="comment">        for (int i = 0; i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="comment">            System.out.print((char)bytes[i]);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//跳过几个字节后再进行读取</span></span><br><span class="line">        <span class="comment">/*in.skip(8);</span></span><br><span class="line"><span class="comment">        byte[] bytes = new byte[1024];</span></span><br><span class="line"><span class="comment">        int len = in.read(bytes);</span></span><br><span class="line"><span class="comment">        for (int i = 0; i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="comment">            System.out.print((char)bytes[i]);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//循环读取整个文件</span></span><br><span class="line">        <span class="comment">/*byte[] bytes = new byte[1024];</span></span><br><span class="line"><span class="comment">        int len;</span></span><br><span class="line"><span class="comment">        while((len = in.read(bytes))!=-1)&#123;</span></span><br><span class="line"><span class="comment">            for (int i = 0; i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="comment">                System.out.print((char)bytes[i]);</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>FileOutputStream</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * FileOutputStream的基本使用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileOutputStreamDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//如果 E:\0面试 目录下不存在b.txt，则会创建b.txt</span></span><br><span class="line">        <span class="comment">/*OutputStream out = new FileOutputStream("E:\\0面试\\b.txt");</span></span><br><span class="line"><span class="comment">        out.write('a');*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//输出流无法创建目录，即 E:\\0面试\\aaa 这个目录不存在，则无法创建，立即报错FileNotFoundException</span></span><br><span class="line">        <span class="comment">/*OutputStream out = new FileOutputStream("E:\\0面试\\aaa\\b.txt");</span></span><br><span class="line"><span class="comment">        out.write('a');*/</span></span><br><span class="line"></span><br><span class="line">        OutputStream out = <span class="keyword">new</span> FileOutputStream(<span class="string">"E:\\0面试\\b.txt"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//不存在的文件b.txt  文件会被创建，且写入ab</span></span><br><span class="line">        <span class="comment">/*out.write('a');</span></span><br><span class="line"><span class="comment">        out.write('b');*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果文件存在内容，则运行write向文件写入内容，会先将之前的内容全部清空，然后写入cd</span></span><br><span class="line">        <span class="comment">/*out.write('c');</span></span><br><span class="line"><span class="comment">        out.write('d');*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//************************写入byte[]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//写入多个字符</span></span><br><span class="line">        <span class="comment">/*byte[] bytes = "Hello world.".getBytes();</span></span><br><span class="line"><span class="comment">        out.write(bytes);*/</span></span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>构造器可以传入File，也可以传入String（代表文件路径） <code>BufferedInputStream</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">String filePath = <span class="string">"E:\\0面试\\a.txt"</span>;</span><br><span class="line">File file = <span class="keyword">new</span> File(filePath);</span><br><span class="line">FileInputStream in = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line"></span><br><span class="line">和</span><br><span class="line"></span><br><span class="line">FileInputStream in = <span class="keyword">new</span> FileInputStream(<span class="string">"E:\\0面试\\a.txt"</span>);</span><br><span class="line"></span><br><span class="line">是一样的。</span><br><span class="line"></span><br><span class="line">会抛出FileNotFoundException异常。</span><br></pre></td></tr></table></figure>
<h5 id="字符流"><a href="#字符流" class="headerlink" title="字符流"></a>字符流</h5><p>抽象父类<code>Reader</code>，<code>Writer</code></p>
<p>子类<code>FileReader</code>，<code>FileWriter</code>，<code>BufferedReader</code>，<code>BufferedWriter</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 字符流的基本使用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Reader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//字符流读取文件</span></span><br><span class="line">        <span class="comment">/*FileReader fr = new FileReader("E:\\0面试\\a.txt");</span></span><br><span class="line"><span class="comment">        int read;</span></span><br><span class="line"><span class="comment">        while((read = fr.read()) != -1)&#123;</span></span><br><span class="line"><span class="comment">            System.out.print((char)read);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        fr.close();*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//字符流写入文件，也会先将原有内容清空，再进行写入。再创建流时选择有参的构造，第二个参数填入true，即可进行追加。</span></span><br><span class="line">       <span class="comment">/* FileWriter fw = new FileWriter("E:\\0面试\\b.txt",true);</span></span><br><span class="line"><span class="comment">        fw.write("中国，韩旭最牛逼");</span></span><br><span class="line"><span class="comment">        fw.close();//close()也会先调用flush()，将缓存刷新出去，不然可以没有真实写出去。*/</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="转换流"><a href="#转换流" class="headerlink" title="转换流"></a>转换流</h5><p>需要额外传入一个码表</p>
<p>字节流通往字符流：<code>InputStreamReader</code></p>
<p>字符流通往字节流：<code>OutputStreamWriter</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 转换流 的基本使用</span></span><br><span class="line"><span class="comment"> * InputStreamReader</span></span><br><span class="line"><span class="comment"> * OutputStreamWriter</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InReader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//使用InputStreamReader进行读取文件</span></span><br><span class="line">        <span class="comment">//inRead();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用OutputStreamWriter进行写文件</span></span><br><span class="line">        OutputStream out = <span class="keyword">new</span> FileOutputStream(<span class="string">"E:\\0面试\\a.txt"</span>);</span><br><span class="line">        OutputStreamWriter ow = <span class="keyword">new</span> OutputStreamWriter(out,<span class="string">"utf-8"</span>);</span><br><span class="line">        ow.write(<span class="string">"中国还是我韩旭最牛逼!\r\nafdasdf"</span>);</span><br><span class="line">        ow.close();<span class="comment">//必须使用ow.close()才能刷出缓存区，使用in.clost()无法将缓存区数据刷出来。</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发现读取到的数据，中文是乱码，其他正常。则代表我们的原始文件a.txt使用的码表不是GBK。</span></span><br><span class="line"><span class="comment">     * 我们去查看a.txt，发现其使用的码表是utf-8，我们将下面码表修改为utf-8，发现读取正常</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">inRead</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        InputStream in = <span class="keyword">new</span> FileInputStream(<span class="string">"E:\\0面试\\a.txt"</span>);</span><br><span class="line">        <span class="comment">//按照GBK码表进行读入：读取到的是字节，然后按照码表GBK进行编码为字符</span></span><br><span class="line">        InputStreamReader ir = <span class="keyword">new</span> InputStreamReader(in,<span class="string">"GBK"</span>);</span><br><span class="line">        <span class="keyword">int</span> read;</span><br><span class="line">        <span class="keyword">while</span>((read = ir.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.print((<span class="keyword">char</span>)read);</span><br><span class="line">        &#125;</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="拷贝文件"><a href="#拷贝文件" class="headerlink" title="拷贝文件"></a>拷贝文件</h5><h6 id="字节流拷贝"><a href="#字节流拷贝" class="headerlink" title="字节流拷贝"></a>字节流拷贝</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过FileInOutputStream BufferedInOutputStream 字节流实现文件拷贝</span></span><br><span class="line"><span class="comment"> * 操作：</span></span><br><span class="line"><span class="comment"> * 开启读取流，读取已存在的文件</span></span><br><span class="line"><span class="comment"> * 将读取到的字节</span></span><br><span class="line"><span class="comment"> * 开启输出流，输出到新文件中</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileCopyByInOut</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//精简代码 抛出异常</span></span><br><span class="line">        <span class="comment">//InputStream in = new FileInputStream("E:\\0面试\\15-19110H32A9.jpg");</span></span><br><span class="line">        InputStream in = <span class="keyword">new</span> FileInputStream(<span class="string">"E:\\2MYLIFE\\视频\\shuihu\\21.mkv"</span>);</span><br><span class="line">        OutputStream out = <span class="keyword">new</span> FileOutputStream(<span class="string">"E:\\0面试\\1.mkv"</span>);</span><br><span class="line">        <span class="comment">//OutputStream out = new FileOutputStream("E:\\0面试\\b.jpg");</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//73kb的jpg照片</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//FileInOutputStream 字节流</span></span><br><span class="line">        <span class="comment">//ByteCopy(in, out);  //1446毫秒。</span></span><br><span class="line">        <span class="comment">//ByteSCopy(in, out);  //22毫秒。 6243</span></span><br><span class="line">        ByteSCopyA(in,out);     <span class="comment">//16521毫秒。</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//BufferedInOutputStream 缓冲字节流</span></span><br><span class="line">        <span class="comment">//BufferedCopy(in, out);  //90ms 24103</span></span><br><span class="line"></span><br><span class="line">        out.close();</span><br><span class="line">        in.close();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//正确的异常处理方式</span></span><br><span class="line">        <span class="comment">/*InputStream in = null;</span></span><br><span class="line"><span class="comment">        OutputStream out = null;</span></span><br><span class="line"><span class="comment">        try &#123;</span></span><br><span class="line"><span class="comment">            //可以拷贝文本、照片、等各种文件</span></span><br><span class="line"><span class="comment">            in = new FileInputStream("E:\\0面试\\15-19110H32A9.jpg");</span></span><br><span class="line"><span class="comment">            out = new FileOutputStream("E:\\0面试\\b.jpg");</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            //73kb的jpg照片</span></span><br><span class="line"><span class="comment">            //ByteCopy(in, out);  //1446毫秒。</span></span><br><span class="line"><span class="comment">            //ByteSCopy(in, out);  //22毫秒。</span></span><br><span class="line"><span class="comment">        &#125;catch (IOException e)&#123;</span></span><br><span class="line"><span class="comment">            throw new RuntimeException(e);</span></span><br><span class="line"><span class="comment">        &#125;finally &#123;</span></span><br><span class="line"><span class="comment">            //关闭流</span></span><br><span class="line"><span class="comment">            try &#123;</span></span><br><span class="line"><span class="comment">                if(out!=null)</span></span><br><span class="line"><span class="comment">                    out.close();</span></span><br><span class="line"><span class="comment">            &#125; catch (IOException e) &#123;</span></span><br><span class="line"><span class="comment">                throw new RuntimeException(e);</span></span><br><span class="line"><span class="comment">            &#125;finally &#123;</span></span><br><span class="line"><span class="comment">                try &#123;</span></span><br><span class="line"><span class="comment">                    if(in!=null)</span></span><br><span class="line"><span class="comment">                        in.close();</span></span><br><span class="line"><span class="comment">                &#125; catch (IOException e) &#123;</span></span><br><span class="line"><span class="comment">                    throw new RuntimeException(e);</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">BufferedCopy</span><span class="params">(InputStream in, OutputStream out)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> begin = System.currentTimeMillis();</span><br><span class="line">        BufferedInputStream bin = <span class="keyword">new</span> BufferedInputStream(in);</span><br><span class="line">        BufferedOutputStream bout = <span class="keyword">new</span> BufferedOutputStream(out);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = bin.read())!=-<span class="number">1</span>)&#123;</span><br><span class="line">            bout.write(len);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">long</span> cost = end - begin;</span><br><span class="line">        System.out.println(<span class="string">"本次操作耗时："</span>+ cost + <span class="string">"毫秒。"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 比下面那个更好的一点是拷贝前后文件完全一致，不会出现多余内容</span></span><br><span class="line"><span class="comment">     * 拷贝文件就用这个********************************************************可以拷贝任何文件数据100%成功********************************</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> in</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> out</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ByteSCopyA</span><span class="params">(InputStream in, OutputStream out)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> begin = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">//使用缓冲区进行拷贝，当最后一次循环进行时，bytes可能未被装满，但是由于bytes.length是1024，所以仍会将1024大小的空间填充到out里（多余的是0），就出现了大小不一致</span></span><br><span class="line">        <span class="keyword">while</span>((len = in.read(bytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            out.write(bytes,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">long</span> cost = end - begin;</span><br><span class="line">        System.out.println(<span class="string">"本次操作耗时："</span>+ cost + <span class="string">"毫秒。"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 优点：可以拷贝任何内容，快速</span></span><br><span class="line"><span class="comment">     * 缺点：仔细观察发现拷贝前后两文件大小不一致 72.6kb -&gt; 73kb</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> in</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> out</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ByteSCopy</span><span class="params">(InputStream in, OutputStream out)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> begin = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">//使用缓冲区进行拷贝，当最后一次循环进行时，bytes可能未被装满，但是由于bytes.length是1024，所以仍会将1024大小的空间填充到out里（多余的是0），就出现了大小不一致</span></span><br><span class="line">        <span class="keyword">while</span>((len = in.read(bytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            out.write(bytes);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">long</span> cost = end - begin;</span><br><span class="line">        System.out.println(<span class="string">"本次操作耗时："</span>+ cost + <span class="string">"毫秒。"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 优点：可以拷贝任何内容</span></span><br><span class="line"><span class="comment">     * 缺点：拷贝很慢，因为是一个字节为单位进行拷贝的</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> in</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> out</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ByteCopy</span><span class="params">(InputStream in, OutputStream out)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> begin = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">int</span> read;</span><br><span class="line">        <span class="comment">//一个字节为单位的进行拷贝，所以无论是什么文件内容都可以被正确拷贝。文件中可以存在中文。</span></span><br><span class="line">        <span class="keyword">while</span>((read = in.read())!= -<span class="number">1</span>)&#123;</span><br><span class="line">            out.write(read);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">long</span> cost = end - begin;</span><br><span class="line">        System.out.println(<span class="string">"本次操作耗时："</span>+ cost + <span class="string">"毫秒。"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输入输出流</span></span><br><span class="line"><span class="comment">一般先打开的后关闭</span></span><br><span class="line"><span class="comment">后打开的先关闭。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">特殊情况下也要看两个流的依赖情况。</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h6 id="字符流拷贝"><a href="#字符流拷贝" class="headerlink" title="字符流拷贝"></a>字符流拷贝</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过字符流拷贝文件</span></span><br><span class="line"><span class="comment"> * 字符流只能拷贝文字文件，不能拷贝图片，视频音频等。</span></span><br><span class="line"><span class="comment"> * 因为这些文件都是以二进制进行存放，字符流读取到之后对他们进行编码处理，但是并不是所有读取到的二进制都能其码表中找到对应的字符，所以就可能造成数据丢失。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileCopyByRW</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(System.getProperty(<span class="string">"file.encoding"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//"E:\\0面试\\a.txt"</span></span><br><span class="line">        <span class="comment">//"E:\\0面试\\b.txt"</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//一个一个字符的拷贝文件</span></span><br><span class="line">        <span class="comment">/*FileReader fr = new FileReader("E:\\0面试\\a.txt");</span></span><br><span class="line"><span class="comment">        FileWriter fw = new FileWriter("E:\\0面试\\b.txt");</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        int len;</span></span><br><span class="line"><span class="comment">        while((len = fr.read()) != -1)&#123;</span></span><br><span class="line"><span class="comment">            fw.write(len);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        fw.close();</span></span><br><span class="line"><span class="comment">        fr.close();*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用缓冲数组来拷贝文件</span></span><br><span class="line">        <span class="comment">/*FileReader fr = new FileReader("E:\\0面试\\a.txt");</span></span><br><span class="line"><span class="comment">        FileWriter fw = new FileWriter("E:\\0面试\\b.txt");</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        int len;</span></span><br><span class="line"><span class="comment">        char[] arr = new char[1024];</span></span><br><span class="line"><span class="comment">        while((len = fr.read(arr)) != -1)&#123;</span></span><br><span class="line"><span class="comment">            fw.write(arr,0,len);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        fw.close();</span></span><br><span class="line"><span class="comment">        fr.close();*/</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="IO总结"><a href="#IO总结" class="headerlink" title="IO总结"></a>IO总结</h4><p>何时使用字符流，何时使用字节流？依据是什么？ </p>
<p>使用字符流的应用场景： 如果是读写字符数据的时候则使用字符流。</p>
<p>使用字节流的应用场景： 如果读写的数据都不需要转换成字符的时候，则使用字节流。</p>
<p><strong>字节流</strong> </p>
<p>输入字节流： ———| InputStream 所有输入字节流的基类。 </p>
<p>抽象类 ————| FileInputStream 读取文件的输入字节流 </p>
<p>​            ————| BufferedInputStream 缓冲输入字节流，其实该类内部只不过是维护了8kb的字节数组而已。 出现的目的主要是为了提高读取文件的效率。 </p>
<p>输出字节流： ———| OutputStream 所有输出字节流的基类。 </p>
<p>抽象类 ————–| FileOutputStream 向文件输出数据的输出字节流。 </p>
<p>​            ————–| BufferedOutputStream 向文件输出数据的输出字节流。 </p>
<p><strong>字符流</strong> </p>
<p>输入字符流： ———-| Reader 所有输入字符流的基类。 </p>
<p>抽象类 ————–| FileReader 读取文件字符的输入字符流 。 </p>
<p>​            ————–| BufferedReader 缓冲输入字符流， 该类出现的目的主要是为了提高读取文件的效率与拓展功能(readLine)。 </p>
<p>输出字符流 ———| Writer 所有输出字符流的基类。 </p>
<p>抽象类。 ————-| FileWriter 向文件输出数据的输出字符流。</p>
<p>​            ————-| BufferedWriter 缓冲输出字符流， 该类出现 的目的是为了提高写文件数据的效率与拓展功能。</p>
<p><strong>转换流</strong> </p>
<p>输入字节流的转换流 </p>
<p>InputStreamReader InputStream——————–&gt; Reader </p>
<p>输出字节流的转换流 </p>
<p>OutputStream OutputStream ——————–&gt; Writer </p>
<p>转换流的作用：</p>
<ol>
<li>可以把字节流转换成字符流使用。</li>
<li>FileReader与FileWriter都是固定是gbk码表进行读写数据的，而转换流可以指定码表进行读写文件的数据。 Properties(配置文件类) 体系： ——-| Map ————| HashTable —————-| Properties 配置文件类、</li>
</ol>
<p>store() 用于生成一个配置文件 load() 加载一个配置i文件 注意：</p>
<ol>
<li>如果配置文件存在着中文，那么生成配置文件的时候要使用字符流，否则会出现乱码。</li>
<li>如果需要修改配置文件的内容，应该先加载原本配置文件，然后再生成一个配置文件。</li>
</ol>
<p>class文件怎么读</p>
<p>除了javac还有哪些常用的工具</p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>insist,on the road</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="Han Xu 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="Han Xu 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
	
	
	
	
	
	
	
	
	
	
	
	
	<div>
	  
		<div>
    
        <div style="text-align:center;color: #ccc;font-size:26px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
	  
	</div>

	
	
	
	
	
	
	
	
	
    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/基础知识/" rel="tag"><i class="fa fa-tag"></i> 基础知识</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/11/09/Thread/" rel="next" title="JAVA中的多线程">
                <i class="fa fa-chevron-left"></i> JAVA中的多线程
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/11/17/数据库/" rel="prev" title="数据库系列">
                数据库系列 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
	<div id="gitalk-container"></div>
  
  
  




        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="Han Xu">
            
              <p class="site-author-name" itemprop="name">Han Xu</p>
              <p class="site-description motion-element" itemprop="description">Knowing is not enough, we must apply. Willing is not enough, we must do.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">45</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">30</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">23</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/hanhanhanxu" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:almostloverhan@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/cA6nEIzpTI91WBL" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/u/5018248892" target="_blank" title="Weibo">
                      
                        <i class="fa fa-fw fa-weibo"></i>Weibo</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://blog.csdn.net/hanhanhanxu/" target="_blank" title="csdn">
                      
                        <i class="fa fa-fw fa-globe"></i>csdn</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.javaboy.org/" title="江南一点雨" target="_blank">江南一点雨</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://shuyi.me/" title="陈树义" target="_blank">陈树义</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.ityouknow.com/" title="纯洁的微笑" target="_blank">纯洁的微笑</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://jm.taobao.org/" title="阿里中间件团队博客" target="_blank">阿里中间件团队博客</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.alloyteam.com/nav/" title="Web前端导航" target="_blank">Web前端导航</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://ife.baidu.com/" title="百度前端技术学院" target="_blank">百度前端技术学院</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://wf.uisdc.com/cn/" title="google前端开发基础" target="_blank">google前端开发基础</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Java语言基础"><span class="nav-number">1.</span> <span class="nav-text">Java语言基础</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基本类型"><span class="nav-number">1.1.</span> <span class="nav-text">基本类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#位逻辑运算符"><span class="nav-number">1.2.</span> <span class="nav-text">位逻辑运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#逻辑运算符"><span class="nav-number">1.3.</span> <span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#位移运算符"><span class="nav-number">1.4.</span> <span class="nav-text">位移运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#无符号位移"><span class="nav-number">1.5.</span> <span class="nav-text">无符号位移</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#关键字"><span class="nav-number">1.6.</span> <span class="nav-text">关键字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#输出流"><span class="nav-number">1.7.</span> <span class="nav-text">输出流</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#内部类"><span class="nav-number">1.8.</span> <span class="nav-text">内部类</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#成员内部类"><span class="nav-number">1.8.1.</span> <span class="nav-text">成员内部类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#局部内部类"><span class="nav-number">1.8.2.</span> <span class="nav-text">局部内部类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#匿名内部类"><span class="nav-number">1.8.3.</span> <span class="nav-text">匿名内部类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#静态内部类"><span class="nav-number">1.8.4.</span> <span class="nav-text">静态内部类</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原生命令编译java代码"><span class="nav-number">1.9.</span> <span class="nav-text">原生命令编译java代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#类、对象的加载过程"><span class="nav-number">1.10.</span> <span class="nav-text">类、对象的加载过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#字符串"><span class="nav-number">1.11.</span> <span class="nav-text">字符串</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#集合"><span class="nav-number">2.</span> <span class="nav-text">集合</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ArrayList"><span class="nav-number">2.1.</span> <span class="nav-text">ArrayList</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vector"><span class="nav-number">2.2.</span> <span class="nav-text">Vector</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#LinkedList"><span class="nav-number">2.3.</span> <span class="nav-text">LinkedList</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#比较："><span class="nav-number">2.4.</span> <span class="nav-text">比较：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#集合的线程安全性"><span class="nav-number">2.5.</span> <span class="nav-text">集合的线程安全性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HashMap"><span class="nav-number">2.6.</span> <span class="nav-text">HashMap</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hashtable"><span class="nav-number">2.7.</span> <span class="nav-text">Hashtable</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#LinkedHashMap"><span class="nav-number">2.8.</span> <span class="nav-text">LinkedHashMap</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hashmap和Hashtable"><span class="nav-number">3.</span> <span class="nav-text">Hashmap和Hashtable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#反射"><span class="nav-number">4.</span> <span class="nav-text">反射</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#小例子"><span class="nav-number">4.1.</span> <span class="nav-text">小例子</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#常用方法"><span class="nav-number">4.2.</span> <span class="nav-text">常用方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#实战方法"><span class="nav-number">4.3.</span> <span class="nav-text">实战方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多线程"><span class="nav-number">5.</span> <span class="nav-text">多线程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件IO流"><span class="nav-number">6.</span> <span class="nav-text">文件IO流</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#File"><span class="nav-number">6.1.</span> <span class="nav-text">File</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#码表"><span class="nav-number">6.2.</span> <span class="nav-text">码表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IO"><span class="nav-number">6.3.</span> <span class="nav-text">IO</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#字节流"><span class="nav-number">6.3.1.</span> <span class="nav-text">字节流</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#字符流"><span class="nav-number">6.3.2.</span> <span class="nav-text">字符流</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#转换流"><span class="nav-number">6.3.3.</span> <span class="nav-text">转换流</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#拷贝文件"><span class="nav-number">6.3.4.</span> <span class="nav-text">拷贝文件</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#字节流拷贝"><span class="nav-number">6.3.4.1.</span> <span class="nav-text">字节流拷贝</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#字符流拷贝"><span class="nav-number">6.3.4.2.</span> <span class="nav-text">字符流拷贝</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IO总结"><span class="nav-number">6.4.</span> <span class="nav-text">IO总结</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
	  
	  
    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  



  <span class="author" itemprop="copyrightHolder">Han Xu</span>

  
</div>






  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>










<br>
<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>
<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  访问量:<span id="busuanzi_value_site_pv"></span>
</span>
</div>
<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共85.3k字</span>
</div>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>
  
  
  <a href="https://github.com/hanhanhanxu" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  
  
  

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
   <script type="text/javascript">
        var gitalk = new Gitalk({
          clientID: '93b01fb3f0489f2eb6be',
          clientSecret: '107cd730d425572a1f9daede4dffc4aa257feb59',
          repo: 'hanhanhanxu.github.io',
          owner: 'hanhanhanxu',
          admin: ['hanhanhanxu'],
          id: location.pathname,
          distractionFreeMode: 'true'
        })
        gitalk.render('gitalk-container')           
       </script>


  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("0qqq4iMSu8UgSETNjG4Bh9yy-gzGzoHsz", "QXzdcvk0FwnBSJPEaGMX6sbu");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

  
  <script type="text/javascript" src="/js/src/dynamic_bg.js"></script>
</body>
</html>
